# $Id: GNUmakefile,v 1.8 2001/06/23 19:32:20 dwmw2 Exp $

ifndef CONFIG_MTD

# We're being invoked outside a normal kernel build. Fake it

# CONFIG_MTD_ARM := m
CONFIG_MTD_CFI_FLAGADM := m
# CONFIG_MTD_CSTM_MIPS_IXX := m
# CONFIG_MTD_DC21285 := m
CONFIG_MTD_ELAN_104NC := m
CONFIG_MTD_IQ80310 := m
CONFIG_MTD_L440GX := m
CONFIG_MTD_NORA := m
CONFIG_MTD_OCTAGON := m
CONFIG_MTD_PHYSMAP := m
CONFIG_MTD_PNC2000 := m
CONFIG_MTD_RPXLITE := m
# CONFIG_MTD_SA1100 := m
CONFIG_MTD_SBC_GXX := m
CONFIG_MTD_SC520CDP := m
CONFIG_MTD_NETSC520 := m
# CONFIG_MTD_SUN_UFLASH := m
CONFIG_MTD_VMAX := m
CONFIG_MTD_DBOX2 := m

CFLAGS_physmap.o := -DCONFIG_MTD_PHYSMAP_START=0x8000000 -DCONFIG_MTD_PHYSMAP_LEN=0x4000000 -DCONFIG_MTD_PHYSMAP_BUSWIDTH=2
CFLAGS_cstmmap.o := -DCONFIG_MTD_CSTM_MIPS_IXX_START=0x8000000 -DCONFIG_MTD_CSTM_MIPS_IXX_LEN=0x4000000 -DCONFIG_MTD_CSTM_MIPS_IXX_BUSWIDTH=2
endif

# Normal case - build in-kernel

ifeq ($(VERSION),2)
 ifneq ($(PATCHLEVEL),4)
  ifneq ($(PATCHLEVEL),5)
   OLDTOPDIR := $(TOPDIR)
   TOPDIR := $(shell pwd)/..
  endif
 endif
endif

include Makefile

